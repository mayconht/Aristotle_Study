meta {
  name: Updates an existing user in the system.
  type: http
  seq: 6
}

put {
  url: {{baseUrl}}/api/User/:id
  body: json
  auth: inherit
}

params:path {
  id: {{userId}}
}

body:json {
  {
    "name": "{{newGeneratedFullName}}",
    "email": "{{newGeneratedEmail}}",
    "dateOfBirth": "{{userDoB}}"
  }
}

assert {
  res.status: eq 200
  res.body: isJson
  res.body.id: eq {{userId}}
  res.body.email: eq {{newGeneratedEmail}}
  res.body.name: eq {{newGeneratedFullName}}
}

script:pre-request {
  const email = bru.interpolate('{{$randomEmail}}');
  const fullName =  bru.interpolate('{{$randomFullName}}');
  
  bru.setVar("newGeneratedEmail", email);
  bru.setVar("newGeneratedFullName", fullName);
}
